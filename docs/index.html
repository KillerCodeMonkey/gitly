<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>gitly</title><meta name="description" content="Documentation for gitly"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">gitly</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>gitly</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#gitly" id="gitly" style="color: inherit; text-decoration: none;">
  <h1>gitly</h1>
</a>
<p>An API to download and/or extract git repositories.</p>
<p><a href="https://github.com/iwatakeshi/gitly/actions?query=workflow%3A%22Node+CI%22"><img src="https://github.com/iwatakeshi/gitly/workflows/Node%20CI/badge.svg" alt="Node CI"></a>
<a href="https://www.npmjs.com/package/gitly"><img src="https://img.shields.io/npm/v/gitly.svg" alt="Version"></a>
<a href="https://codecov.io/gh/iwatakeshi/gitly"><img src="https://codecov.io/gh/iwatakeshi/gitly/branch/master/graph/badge.svg" alt="codecov"></a>
<a href="https://www.npmjs.com/package/gitly"><img src="https://img.shields.io/npm/dw/gitly.svg" alt="Downloads/week"></a>
<a href="https://github.com/iwatakeshi/gitly/blob/master/LICENSE.md"><img src="https://img.shields.io/github/license/iwatakeshi/gitly" alt="License"></a></p>
<p>This project is the spiritual successor of <a href="https://github.com/lukeed/gittar">gittar</a> written in TypeScript.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p><strong>Since v2.0+</strong></p>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-2"> </span><span class="hl-7">gitly</span><span class="hl-2"> </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-5">&#39;gitly&#39;</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">gitly</span><span class="hl-2">(</span><span class="hl-5">&#39;iwatakeshi/gitly&#39;</span><span class="hl-2">, </span><span class="hl-5">&#39;/path/to/extracted/folder/&#39;</span><span class="hl-2">))</span><br/><span class="hl-0">// -&gt; [&#39;~/.gitly/github/iwatakeshi/gitly/master.tar.gz&#39;, &#39;/path/to/extracted/folder/&#39;]</span>
</code></pre>
<p><strong>Since v1.0+</strong></p>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-7">download</span><span class="hl-2">, </span><span class="hl-7">extract</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-5">&#39;gitly&#39;</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-5">&#39;iwatakeshi/gitly&#39;</span><span class="hl-2">))</span><br/><span class="hl-0">// -&gt; ~/.gitly/github/iwatakeshi/gitly/master.tar.gz</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-5">&#39;iwatakeshi/gitly#v1.0.0&#39;</span><span class="hl-2">))</span><br/><span class="hl-0">// -&gt; ~/.gitly/github/iwatakeshi/gitly/v1.0.0.tar.gz</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-5">&#39;https://github.com/iwatakeshi/gitly&#39;</span><span class="hl-2">))</span><br/><span class="hl-0">// -&gt; ~/.gitly/github/iwatakeshi/gitly/master.tar.gz</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-5">&#39;gitlab:Rich-Harris/buble#v0.15.2&#39;</span><span class="hl-2">))</span><br/><span class="hl-0">// -&gt; ~/.gitly/gitlab/Rich-Harris/buble/v0.15.2.tar.gz</span><br/><br/><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-5">&#39;Rich-Harris/buble&#39;</span><span class="hl-2">, { </span><span class="hl-7">host:</span><span class="hl-2"> </span><span class="hl-5">&#39;gitlab&#39;</span><span class="hl-2"> }))</span><br/><span class="hl-0">// -&gt; ~/.gitly/gitlab/Rich-Harris/buble/master.tar.gz</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">source</span><span class="hl-2"> = </span><span class="hl-5">&#39;path to downloaded zip file (can be obtained by download())&#39;</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">destination</span><span class="hl-2"> = </span><span class="hl-5">&#39;/path/to/foobar&#39;</span><br/><br/><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-6">extract</span><span class="hl-2">(</span><span class="hl-7">source</span><span class="hl-2">, </span><span class="hl-7">destination</span><span class="hl-2">)</span><br/><span class="hl-0">// -&gt; /path/to/foobar</span>
</code></pre>

<a href="#advanced-usage" id="advanced-usage" style="color: inherit; text-decoration: none;">
  <h2>Advanced Usage</h2>
</a>
<p><strong>Since v3.0+</strong></p>
<p>Because urls and remote APIs can change, you can extend/replace some capabilities of gitly.</p>
<p>For example, if you would like to change the way gitly fetches the archive, replace the <code>fetch</code> method with our own.</p>
<pre><code class="language-ts"><span class="hl-6">gitly</span><span class="hl-2">(</span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, </span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-6">fetch</span><span class="hl-7">:</span><span class="hl-2"> </span><span class="hl-1">async</span><span class="hl-2"> (</span><span class="hl-7">url</span><span class="hl-2">, </span><span class="hl-7">destination</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-7">url</span><span class="hl-2">, </span><span class="hl-0">// Use axios or do something and return the url</span><br/><span class="hl-2">})</span>
</code></pre>
<p>You can also change the way how gitly filters the url for git repositories.</p>
<pre><code class="language-ts"><span class="hl-6">gitly</span><span class="hl-2">(</span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, </span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-7">url:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">filter</span><span class="hl-7">:</span><span class="hl-2"> </span><span class="hl-1">async</span><span class="hl-2"> (</span><span class="hl-7">info</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-7">gitUrl</span><span class="hl-2">, </span><span class="hl-0">// Deterime input url and return the correct git url based on the input.</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">})</span>
</code></pre>
<p>Lastly, you can even change the extraction filter method for <code>tar</code>.</p>
<pre><code class="language-ts"><span class="hl-6">gitly</span><span class="hl-2">(</span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, </span><span class="hl-5">&#39;...&#39;</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-7">extract:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">filter</span><span class="hl-7">:</span><span class="hl-2"> </span><span class="hl-1">async</span><span class="hl-2"> (</span><span class="hl-7">path</span><span class="hl-2">, </span><span class="hl-7">stat</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2">, </span><span class="hl-0">// Filter the files for tar</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">})</span>
</code></pre>

<a href="#gitlyoptions-interface" id="gitlyoptions-interface" style="color: inherit; text-decoration: none;">
  <h3><code>GitlyOptions</code> (interface)</h3>
</a>
<pre><code class="language-ts"><span class="hl-1">interface</span><span class="hl-2"> </span><span class="hl-9">GitlyOptions</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-0">/** Use cache only (default: undefined) */</span><br/><span class="hl-2">  </span><span class="hl-7">cache</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><br/><span class="hl-2">  </span><span class="hl-0">/** Use both cache and local (default: undefined) */</span><br/><span class="hl-2">  </span><span class="hl-7">force</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><br/><span class="hl-2">  </span><span class="hl-0">/** Throw an error when fetching (default: undefined) */</span><br/><span class="hl-2">  </span><span class="hl-7">throw</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><br/><span class="hl-2">  </span><span class="hl-0">/** Set cache directory (default: &#39;~/.gitly&#39;) */</span><br/><span class="hl-2">  </span><span class="hl-7">temp</span><span class="hl-2">?: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-0">/** Set the host name (default: undefined) */</span><br/><span class="hl-2">  </span><span class="hl-7">host</span><span class="hl-2">?: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-0">/** Options for url */</span><br/><span class="hl-2">  </span><span class="hl-7">url</span><span class="hl-2">?: {</span><br/><span class="hl-2">    </span><span class="hl-0">/**</span><br/><span class="hl-0">     * Extend the url filtering method</span><br/><span class="hl-0">     * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-7">info</span><span class="hl-0"> The URLInfo object */</span><br/><span class="hl-2">    </span><span class="hl-6">filter</span><span class="hl-2">?(</span><span class="hl-7">info</span><span class="hl-2">: </span><span class="hl-9">URLInfo</span><span class="hl-2">): </span><span class="hl-9">string</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">  </span><span class="hl-0">/** Options for tar extractions */</span><br/><span class="hl-2">  </span><span class="hl-7">extract</span><span class="hl-2">?: {</span><br/><span class="hl-2">    </span><span class="hl-0">/** Extend the extract filtering method for the &#39;tar&#39; library */</span><br/><span class="hl-2">    </span><span class="hl-6">filter</span><span class="hl-2">?(</span><span class="hl-7">path</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-7">stat</span><span class="hl-2">: </span><span class="hl-9">FileStat</span><span class="hl-2">): </span><span class="hl-9">boolean</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * Overrieds the fetch function</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-7">url</span><span class="hl-0"> The url of the repository to download</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-7">destination</span><span class="hl-0"> The path where the file is to be downloaded</span><br/><span class="hl-0">   * </span><span class="hl-1">@returns</span><span class="hl-0"> The destination path</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-6">fetch</span><span class="hl-2">: (</span><span class="hl-7">url</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-7">destination</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-9">Promise</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">&gt;</span><br/><span class="hl-2">}</span>
</code></pre>

<a href="#urlinfo-interface" id="urlinfo-interface" style="color: inherit; text-decoration: none;">
  <h3><code>URLInfo</code> (interface)</h3>
</a>
<pre><code class="language-ts"><span class="hl-1">interface</span><span class="hl-2"> </span><span class="hl-9">URLInfo</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-7">protocol</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">host</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">hostname</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">hash</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">href</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">path</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">repository</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">owner</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">  </span><span class="hl-7">branch</span><span class="hl-2">: </span><span class="hl-9">string</span><br/><span class="hl-2">}</span>
</code></pre>

<a href="#gitly-function" id="gitly-function" style="color: inherit; text-decoration: none;">
  <h3><code>gitly</code> (function)</h3>
</a>
<pre><code class="language-ts"><span class="hl-1">function</span><span class="hl-2"> </span><span class="hl-6">gitly</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-7">repository</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-7">destination</span><span class="hl-2">?: </span><span class="hl-9">string</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-7">options</span><span class="hl-2">?: </span><span class="hl-9">GitlyOptions</span><br/><span class="hl-2">): </span><span class="hl-9">Promise</span><span class="hl-2">&lt;[</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">string</span><span class="hl-2">]&gt;</span>
</code></pre>

<a href="#download-function" id="download-function" style="color: inherit; text-decoration: none;">
  <h3><code>download</code> (function)</h3>
</a>
<pre><code class="language-ts"><span class="hl-1">function</span><span class="hl-2"> </span><span class="hl-6">download</span><span class="hl-2">(</span><span class="hl-7">repository</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-7">options</span><span class="hl-2">: </span><span class="hl-9">GitlyOptions</span><span class="hl-2">): </span><span class="hl-9">Promise</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">&gt;</span>
</code></pre>

<a href="#extract-function" id="extract-function" style="color: inherit; text-decoration: none;">
  <h3><code>extract</code> (function)</h3>
</a>
<pre><code class="language-ts"><span class="hl-1">function</span><span class="hl-2"> </span><span class="hl-6">extract</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-7">source</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-7">destination</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-7">options</span><span class="hl-2">?: </span><span class="hl-9">GitlyOptions</span><br/><span class="hl-2">): </span><span class="hl-9">Promise</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">&gt;</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/GitURL.html" class="tsd-kind-icon">GitURL</a></li><li class="tsd-kind-interface"><a href="interfaces/GitMetadata.html" class="tsd-kind-icon">Git<wbr/>Metadata</a></li><li class="tsd-kind-interface"><a href="interfaces/GitURLOptions.html" class="tsd-kind-icon">GitURLOptions</a></li><li class="tsd-kind-interface"><a href="interfaces/GitlyDownloadOptions.html" class="tsd-kind-icon">Gitly<wbr/>Download<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/GitlyExtractOptions.html" class="tsd-kind-icon">Gitly<wbr/>Extract<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/GitlyOptions.html" class="tsd-kind-icon">Gitly<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/GitlyParseOptions.html" class="tsd-kind-icon">Gitly<wbr/>Parse<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#GitProvider" class="tsd-kind-icon">Git<wbr/>Provider</a></li><li class="tsd-kind-function"><a href="modules.html#_download" class="tsd-kind-icon">$download</a></li><li class="tsd-kind-function"><a href="modules.html#_extract" class="tsd-kind-icon">$extract</a></li><li class="tsd-kind-function"><a href="modules.html#_parse" class="tsd-kind-icon">$parse</a></li><li class="tsd-kind-function"><a href="modules.html#download" class="tsd-kind-icon">download</a></li><li class="tsd-kind-function"><a href="modules.html#extract" class="tsd-kind-icon">extract</a></li><li class="tsd-kind-function"><a href="modules.html#gitly" class="tsd-kind-icon">gitly</a></li><li class="tsd-kind-function"><a href="modules.html#parse" class="tsd-kind-icon">parse</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>